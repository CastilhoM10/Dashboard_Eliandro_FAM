<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Resultados de Cursos (Simulação)</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --cor-principal: #007bff;
            --cor-secundaria: #28a745;
            --fundo-principal: #f8f9fa;
            --cor-texto: #333;
            --sombra-card: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--fundo-principal);
            color: var(--cor-texto);
        }

        .header {
            background-color: var(--cor-principal);
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 1.8em;
            box-shadow: var(--sombra-card);
        }

        .dashboard-container {
            display: flex;
            padding: 20px;
            gap: 20px;
        }

        .sidebar {
            width: 250px;
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: var(--sombra-card);
            flex-shrink: 0;
            height: fit-content;
        }

        .sidebar h3 {
            color: var(--cor-principal);
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            margin-top: 0;
        }

        .filter-group {
            margin-bottom: 15px;
        }

        .filter-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .filter-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .main-content {
            flex-grow: 1;
        }

        .kpi-cards {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .kpi-card {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--sombra-card);
            text-align: center;
        }

        .kpi-card h4 {
            margin: 0 0 5px 0;
            font-size: 1em;
            color: #6c757d;
        }

        .kpi-value {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--cor-principal);
        }

        .kpi-card:nth-child(2) .kpi-value { color: var(--cor-secundaria); }
        .kpi-card:nth-child(3) .kpi-value { color: #ffc107; }
        .kpi-card:nth-child(4) .kpi-value { color: #dc3545; }


        .chart-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .chart-container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--sombra-card);
            height: 400px; /* Altura padrão para os gráficos */
        }
    </style>
</head>
<body>

    <div class="header">
        Dashboard de Resultados dos Cursos N3
    </div>

    <div class="dashboard-container">
        
        <div class="sidebar">
            <h3>Filtros (Análises Interativas)</h3>

            <div class="filter-group">
                <label for="filtro-curso">Nome do Curso:</label>
                <select id="filtro-curso" onchange="updateDashboard()">
                    <option value="todos">Todos os Cursos</option>
                    <option value="analise">Análise de Dados Avançada</option>
                    <option value="excel">Excel para Dashboards</option>
                    <option value="gestao">Gestão de Projetos Ágeis</option>
                    <option value="marketing">Marketing Digital N3</option>
                </select>
            </div>

            <div class="filter-group">
                <label for="filtro-periodo">Período/Data de Início:</label>
                <select id="filtro-periodo" onchange="updateDashboard()">
                    <option value="trimestre">Último Trimestre</option>
                    <option value="mensal">Mês Atual (N3)</option>
                    <option value="anual">Ano Atual</option>
                </select>
            </div>

            <div class="filter-group">
                <label for="filtro-status">Status do Aluno:</label>
                <select id="filtro-status" onchange="updateDashboard()">
                    <option value="todos">Todos os Status</option>
                    <option value="concluido">Concluído</option>
                    <option value="evasao">Evasão</option>
                    <option value="ativo">Ativo</option>
                </select>
            </div>
            
             <p style="margin-top: 25px; font-size: 0.9em; color: #6c757d;">* Use os filtros para cruzar as análises e refinar os resultados.</p>
        </div>

        <div class="main-content">
            
            <div class="kpi-cards">
                <div class="kpi-card">
                    <h4>Taxa de Conclusão Geral</h4>
                    <div class="kpi-value" id="kpi-conclusao">78.5%</div>
                </div>
                <div class="kpi-card">
                    <h4>Média Geral de Notas</h4>
                    <div class="kpi-value" id="kpi-media">8.2</div>
                </div>
                <div class="kpi-card">
                    <h4>Total de Alunos Ativos</h4>
                    <div class="kpi-value" id="kpi-alunos">1.250</div>
                </div>
                <div class="kpi-card">
                    <h4>Taxa de Evasão</h4>
                    <div class="kpi-value" id="kpi-evasao">14.3%</div>
                </div>
            </div>

            <div class="chart-row">
                <div class="chart-container">
                    <canvas id="rankingCursos"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="tendenciaConclusao"></canvas>
                </div>
            </div>

            <div class="chart-row">
                <div class="chart-container">
                    <canvas id="matriculasVsConclusoes"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="evasaoPorCurso"></canvas>
                </div>
            </div>

        </div>
    </div>

    <script>
        // Dados SIMULADOS (seriam seus dados reais do CSV)
        const mockData = {
            'todos': {
                kpis: { conclusao: '78.5%', media: '8.2', alunos: '1.250', evasao: '14.3%' },
                ranking: { labels: ['Excel', 'Análise', 'Gestão', 'Marketing'], data: [8.9, 8.5, 7.8, 7.5] },
                tendencia: { labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'], data: [65, 70, 75, 78, 80, 78] },
                mvs: { labels: ['Q1 2024', 'Q2 2024'], matriculas: [750, 600], conclusoes: [550, 470] },
                evasao: { labels: ['Marketing Digital N3', 'Gestão de Projetos Ágeis', 'Excel para Dashboards'], data: [22, 18, 10] }
            },
            'analise': {
                kpis: { conclusao: '85.0%', media: '8.5', alunos: '300', evasao: '10.0%' },
                ranking: { labels: ['Módulo 1', 'Módulo 2', 'Módulo 3'], data: [8.9, 8.5, 8.1] },
                tendencia: { labels: ['Mar', 'Abr', 'Mai', 'Jun'], data: [80, 82, 85, 84] },
                mvs: { labels: ['Mar', 'Abr', 'Mai', 'Jun'], matriculas: [100, 70, 80, 50], conclusoes: [80, 60, 70, 45] },
                evasao: { labels: ['Módulo 1', 'Módulo 2', 'Módulo 3'], data: [15, 10, 5] }
            }
            // Outras simulações de dados para os outros filtros iriam aqui...
        };

        let chartRanking, chartTendencia, chartMvs, chartEvasao;

        // Função para atualizar os KPIs com base na seleção
        function updateKPIs(data) {
            document.getElementById('kpi-conclusao').textContent = data.kpis.conclusao;
            document.getElementById('kpi-media').textContent = data.kpis.media;
            document.getElementById('kpi-alunos').textContent = data.kpis.alunos;
            document.getElementById('kpi-evasao').textContent = data.kpis.evasao;
        }

        // Função principal que redesenha o Dashboard
        function updateDashboard() {
            const cursoSelecionado = document.getElementById('filtro-curso').value;
            // Usamos 'todos' como fallback caso não haja dados simulados para um filtro
            const data = mockData[cursoSelecionado] || mockData['todos']; 

            updateKPIs(data);
            
            // Destrói os gráficos anteriores para redesenhar
            if (chartRanking) chartRanking.destroy();
            if (chartTendencia) chartTendencia.destroy();
            if (chartMvs) chartMvs.destroy();
            if (chartEvasao) chartEvasao.destroy();


            // 1. Ranking de Cursos (Gráfico de Barras Horizontal)
            const ctxRanking = document.getElementById('rankingCursos').getContext('2d');
            chartRanking = new Chart(ctxRanking, {
                type: 'bar',
                data: {
                    labels: data.ranking.labels,
                    datasets: [{
                        label: 'Média de Notas',
                        data: data.ranking.data,
                        backgroundColor: 'rgba(0, 123, 255, 0.7)',
                        borderColor: 'rgba(0, 123, 255, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y', // Tornar as barras horizontais
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { title: { display: true, text: 'Ranking de Cursos por Média de Notas (Análise de Desempenho)' } },
                    scales: { x: { beginAtZero: true, max: 10 } }
                }
            });

            // 2. Tendência de Conclusão (Gráfico de Linha)
            const ctxTendencia = document.getElementById('tendenciaConclusao').getContext('2d');
            chartTendencia = new Chart(ctxTendencia, {
                type: 'line',
                data: {
                    labels: data.tendencia.labels,
                    datasets: [{
                        label: 'Taxa de Conclusão (%)',
                        data: data.tendencia.data,
                        borderColor: 'rgba(40, 167, 69, 1)',
                        backgroundColor: 'rgba(40, 167, 69, 0.2)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { title: { display: true, text: 'Tendência da Taxa de Conclusão (Eficácia ao Longo do Tempo)' } },
                    scales: { y: { beginAtZero: true, max: 100 } }
                }
            });
            
            // 3. Matrículas vs. Conclusões (Gráfico de Barras Agrupadas)
            const ctxMvs = document.getElementById('matriculasVsConclusoes').getContext('2d');
            chartMvs = new Chart(ctxMvs, {
                type: 'bar',
                data: {
                    labels: data.mvs.labels,
                    datasets: [{
                        label: 'Matrículas',
                        data: data.mvs.matriculas,
                        backgroundColor: 'rgba(255, 193, 7, 0.8)'
                    },
                    {
                        label: 'Conclusões',
                        data: data.mvs.conclusoes,
                        backgroundColor: 'rgba(0, 123, 255, 0.8)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { title: { display: true, text: 'Matrículas vs. Conclusões (Análise Operacional)' } },
                    scales: { x: { stacked: false }, y: { stacked: false } }
                }
            });

            // 4. Evasão por Curso (Gráfico de Barras Horizontal)
            const ctxEvasao = document.getElementById('evasaoPorCurso').getContext('2d');
            chartEvasao = new Chart(ctxEvasao, {
                type: 'bar',
                data: {
                    labels: data.evasao.labels,
                    datasets: [{
                        label: 'Número de Evasões',
                        data: data.evasao.data,
                        backgroundColor: 'rgba(220, 53, 69, 0.7)',
                        borderColor: 'rgba(220, 53, 69, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y', // Tornar as barras horizontais
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { title: { display: true, text: 'Evasão por Curso (Identificação de Risco)' } },
                    scales: { x: { beginAtZero: true } }
                }
            });
        }

        // Inicializa o dashboard ao carregar a página
        window.onload = updateDashboard;
    </script>

</body>
</html>
